{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///Routine.min.js","webpack:///webpack/bootstrap cca7fab09041d4394025","webpack:///./src/Routine.js","webpack:///./src/EnsureThat.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_classCallCheck","instance","Constructor","TypeError","runAsynchronously","routine","operations","lastResult","promise","Promise","resolve","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","undefined","_step4","_loop","operation","value","then","args","invoke","_iterator4","Symbol","iterator","next","done","err","error","handlers","abort","Routine","handleError","reject","Object","defineProperty","_typeof","obj","constructor","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","_EnsureThat","get","ensureThat","scope","aborted","currentOperation","isSynchronous","aspects","invocation","before","after","validateOperation","push","addOperation","eventName","_this","arg","_ref","arguments","_ref$hasMultipleArgs","hasMultipleArgs","_ref$respectAbort","respectAbort","_ref$recordIt","recordIt","_ref$runAspects","runAspects","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","aspect","result","isRunnable","run","apply","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_aspect","operationsToPromisify","slice","as","_len","Array","_key","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","Error","$state","state","$invocation","name","EnsureThat","runner","_operations","concat","conditionalErrorFor","operationPreppedForExecution","runnable","elseOperation","_result"],"mappings":"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","file":"Routine.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"routine\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"routine\"] = factory();\n\telse\n\t\troot[\"routine\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"routine\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"routine\"] = factory();\n\telse\n\t\troot[\"routine\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _EnsureThat = __webpack_require__(1);\n\t\n\tObject.defineProperty(exports, 'ensureThat', {\n\t\tenumerable: true,\n\t\tget: function get() {\n\t\t\treturn _EnsureThat.ensureThat;\n\t\t}\n\t});\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Routine = function () {\n\t\tfunction Routine(scope) {\n\t\t\t_classCallCheck(this, Routine);\n\t\n\t\t\tthis.aborted = false;\n\t\t\tthis.operations = [];\n\t\t\tthis.handlers = {};\n\t\t\tthis.currentOperation = undefined;\n\t\t\tthis.isSynchronous = true;\n\t\t\tthis.aspects = {\n\t\t\t\tinvocation: {\n\t\t\t\t\tbefore: [],\n\t\t\t\t\tafter: []\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tthis.scope = scope;\n\t\n\t\t\tscope.routine = this;\n\t\t}\n\t\n\t\t_createClass(Routine, [{\n\t\t\tkey: 'addOperation',\n\t\t\tvalue: function addOperation(operation) {\n\t\n\t\t\t\tRoutine.validateOperation(operation);\n\t\n\t\t\t\tthis.operations.push(operation);\n\t\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'first',\n\t\t\tvalue: function first(operation) {\n\t\t\t\tthis.addOperation(operation);\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'then',\n\t\t\tvalue: function then(operation) {\n\t\t\t\tthis.addOperation(operation);\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'on',\n\t\t\tvalue: function on(eventName, operation) {\n\t\t\t\tvar _this = this;\n\t\n\t\t\t\tRoutine.validateOperation(operation);\n\t\n\t\t\t\tthis.handlers[eventName] = function (arg) {\n\t\t\t\t\treturn operation.call(_this.scope, arg);\n\t\t\t\t};\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'abort',\n\t\t\tvalue: function abort() {\n\t\t\t\tthis.aborted = true;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'invoke',\n\t\t\tvalue: function invoke() {\n\t\t\t\tvar _ref = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t\n\t\t\t\tvar operation = _ref.operation;\n\t\t\t\tvar args = _ref.args;\n\t\t\t\tvar _ref$hasMultipleArgs = _ref.hasMultipleArgs;\n\t\t\t\tvar hasMultipleArgs = _ref$hasMultipleArgs === undefined ? false : _ref$hasMultipleArgs;\n\t\t\t\tvar _ref$respectAbort = _ref.respectAbort;\n\t\t\t\tvar respectAbort = _ref$respectAbort === undefined ? true : _ref$respectAbort;\n\t\t\t\tvar _ref$recordIt = _ref.recordIt;\n\t\t\t\tvar recordIt = _ref$recordIt === undefined ? true : _ref$recordIt;\n\t\t\t\tvar _ref$runAspects = _ref.runAspects;\n\t\t\t\tvar runAspects = _ref$runAspects === undefined ? true : _ref$runAspects;\n\t\n\t\n\t\t\t\tif (runAspects) {\n\t\t\t\t\tvar _iteratorNormalCompletion = true;\n\t\t\t\t\tvar _didIteratorError = false;\n\t\t\t\t\tvar _iteratorError = undefined;\n\t\n\t\t\t\t\ttry {\n\t\t\t\t\t\tfor (var _iterator = this.aspects.invocation.before[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\t\t\t\tvar aspect = _step.value;\n\t\n\t\t\t\t\t\t\taspect({ operation: operation, args: args, hasMultipleArgs: hasMultipleArgs, respectAbort: respectAbort, recordIt: recordIt });\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t_didIteratorError = true;\n\t\t\t\t\t\t_iteratorError = err;\n\t\t\t\t\t} finally {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (!_iteratorNormalCompletion && _iterator.return) {\n\t\t\t\t\t\t\t\t_iterator.return();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tif (respectAbort && this.aborted) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tif (recordIt) {\n\t\t\t\t\tthis.currentOperation = operation;\n\t\t\t\t}\n\t\n\t\t\t\tvar result = void 0;\n\t\n\t\t\t\tif (Routine.isRunnable(operation)) {\n\t\t\t\t\tresult = operation.run(this);\n\t\t\t\t} else {\n\t\t\t\t\tif (hasMultipleArgs) {\n\t\t\t\t\t\tresult = operation.apply(this.scope, args);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult = operation.call(this.scope, args);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tif (runAspects) {\n\t\t\t\t\tvar _iteratorNormalCompletion2 = true;\n\t\t\t\t\tvar _didIteratorError2 = false;\n\t\t\t\t\tvar _iteratorError2 = undefined;\n\t\n\t\t\t\t\ttry {\n\t\t\t\t\t\tfor (var _iterator2 = this.aspects.invocation.after[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n\t\t\t\t\t\t\tvar _aspect = _step2.value;\n\t\n\t\t\t\t\t\t\t_aspect({ operation: operation, args: args, hasMultipleArgs: hasMultipleArgs, respectAbort: respectAbort, recordIt: recordIt, result: result });\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t_didIteratorError2 = true;\n\t\t\t\t\t\t_iteratorError2 = err;\n\t\t\t\t\t} finally {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (!_iteratorNormalCompletion2 && _iterator2.return) {\n\t\t\t\t\t\t\t\t_iterator2.return();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\tif (_didIteratorError2) {\n\t\t\t\t\t\t\t\tthrow _iteratorError2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'run',\n\t\t\tvalue: function run() {\n\t\t\t\tvar lastResult = void 0;\n\t\n\t\t\t\ttry {\n\t\t\t\t\tfor (var i = 0; i < this.operations.length; i++) {\n\t\t\t\t\t\tvar operation = this.operations[i];\n\t\n\t\t\t\t\t\tlastResult = this.invoke({\n\t\t\t\t\t\t\toperation: operation,\n\t\t\t\t\t\t\targs: lastResult\n\t\t\t\t\t\t});\n\t\n\t\t\t\t\t\tif (lastResult instanceof Promise) {\n\t\t\t\t\t\t\tthis.isSynchronous = false;\n\t\t\t\t\t\t\tvar operationsToPromisify = this.operations.slice(i + 1, this.operations.length);\n\t\t\t\t\t\t\treturn runAsynchronously(this, operationsToPromisify, lastResult);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\n\t\t\t\t\treturn lastResult;\n\t\t\t\t} catch (error) {\n\t\t\t\t\tRoutine.handleError(this, error);\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'setup',\n\t\t\tget: function get() {\n\t\t\t\treturn {\n\t\t\t\t\tas: function as() {\n\t\t\t\t\t\tfor (var _len = arguments.length, operations = Array(_len), _key = 0; _key < _len; _key++) {\n\t\t\t\t\t\t\toperations[_key] = arguments[_key];\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\tvar _iteratorNormalCompletion3 = true;\n\t\t\t\t\t\tvar _didIteratorError3 = false;\n\t\t\t\t\t\tvar _iteratorError3 = undefined;\n\t\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tfor (var _iterator3 = operations[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n\t\t\t\t\t\t\t\tvar operation = _step3.value;\n\t\n\t\t\t\t\t\t\t\tRoutine.validateOperation(operation);\n\t\t\t\t\t\t\t\tthis.invoke({\n\t\t\t\t\t\t\t\t\toperation: operation,\n\t\t\t\t\t\t\t\t\targs: this,\n\t\t\t\t\t\t\t\t\trespectAbort: false,\n\t\t\t\t\t\t\t\t\trunAspects: false\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t_didIteratorError3 = true;\n\t\t\t\t\t\t\t_iteratorError3 = err;\n\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tif (!_iteratorNormalCompletion3 && _iterator3.return) {\n\t\t\t\t\t\t\t\t\t_iterator3.return();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\t\tif (_didIteratorError3) {\n\t\t\t\t\t\t\t\t\tthrow _iteratorError3;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'and',\n\t\t\tget: function get() {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'but',\n\t\t\tget: function get() {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}], [{\n\t\t\tkey: 'set',\n\t\t\tvalue: function set(scope) {\n\t\t\t\treturn new Routine(scope);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'isRunnable',\n\t\t\tvalue: function isRunnable(operation) {\n\t\t\t\treturn (typeof operation === 'undefined' ? 'undefined' : _typeof(operation)) === 'object' && operation.run !== undefined;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'validateOperation',\n\t\t\tvalue: function validateOperation(operation) {\n\t\t\t\tif (!Routine.isRunnable(operation) && typeof operation !== 'function') {\n\t\t\t\t\tthrow new Error('Invalid operation type - An operation has to ' + 'either be a function or an object with a `run()` method. Instead an operation of type ' + ('\\'' + (typeof operation === 'undefined' ? 'undefined' : _typeof(operation)) + '\\' was supplied.'));\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'handleError',\n\t\t\tvalue: function handleError(routine, error) {\n\t\t\t\terror.$state = routine.scope.state;\n\t\t\t\terror.$invocation = {\n\t\t\t\t\toperation: routine.currentOperation.name\n\t\t\t\t};\n\t\n\t\t\t\tif (routine.handlers.error) {\n\t\t\t\t\troutine.invoke({\n\t\t\t\t\t\toperation: routine.handlers.error,\n\t\t\t\t\t\targs: error,\n\t\t\t\t\t\trecordIt: false,\n\t\t\t\t\t\trespectAbort: false\n\t\t\t\t\t});\n\t\t\t\t} else if (routine.isSynchronous) {\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Routine;\n\t}();\n\t\n\texports.default = Routine;\n\t\n\t\n\tfunction runAsynchronously(routine, operations, lastResult) {\n\t\tvar promise = Promise.resolve(lastResult);\n\t\n\t\tvar _iteratorNormalCompletion4 = true;\n\t\tvar _didIteratorError4 = false;\n\t\tvar _iteratorError4 = undefined;\n\t\n\t\ttry {\n\t\t\tvar _loop = function _loop() {\n\t\t\t\tvar operation = _step4.value;\n\t\n\t\t\t\tpromise = promise.then(function (args) {\n\t\t\t\t\treturn routine.invoke({\n\t\t\t\t\t\toperation: operation,\n\t\t\t\t\t\targs: args\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t};\n\t\n\t\t\tfor (var _iterator4 = operations[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n\t\t\t\t_loop();\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_didIteratorError4 = true;\n\t\t\t_iteratorError4 = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_iteratorNormalCompletion4 && _iterator4.return) {\n\t\t\t\t\t_iterator4.return();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (_didIteratorError4) {\n\t\t\t\t\tthrow _iteratorError4;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\tpromise = promise.catch(function (error) {\n\t\t\tif (routine.handlers.error) {\n\t\t\t\troutine.abort();\n\t\t\t\treturn new Promise(function (resolve) {\n\t\t\t\t\tRoutine.handleError(routine, error);\n\t\t\t\t\tresolve();\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\treturn Promise.reject(error);\n\t\t});\n\t\n\t\treturn promise;\n\t}\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\texports.ensureThat = ensureThat;\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction ensureThat(operation) {\n\t\treturn new EnsureThat(operation);\n\t}\n\t\n\tvar EnsureThat = function () {\n\t\tfunction EnsureThat(operation) {\n\t\t\t_classCallCheck(this, EnsureThat);\n\t\n\t\t\tthis.scope = {};\n\t\t\tthis.operations = [];\n\t\t\tthis.elseOperation = undefined;\n\t\n\t\t\tthis.addOperation(operation);\n\t\t}\n\t\n\t\t_createClass(EnsureThat, [{\n\t\t\tkey: \"addOperation\",\n\t\t\tvalue: function addOperation(operation) {\n\t\t\t\tthis.operations.push(operationPreppedForExecution(operation, this));\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"that\",\n\t\t\tvalue: function that(operation) {\n\t\t\t\tthis.addOperation(operation);\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"otherwise\",\n\t\t\tvalue: function otherwise(operation) {\n\t\t\t\tthis.elseOperation = operationPreppedForExecution(operation, this);\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"run\",\n\t\t\tvalue: function run(routine) {\n\t\t\t\tthis.routine = routine;\n\t\n\t\t\t\tfor (var i = 0; i < this.operations.length; i++) {\n\t\t\t\t\tvar operation = this.operations[i];\n\t\t\t\t\tvar result = operation();\n\t\n\t\t\t\t\tif (result instanceof Promise) {\n\t\t\t\t\t\tvar operationsToPromisify = this.operations.slice(i + 1, this.operations.length);\n\t\t\t\t\t\treturn runAsynchronously(this, operationsToPromisify, result);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (!result) {\n\t\t\t\t\t\t\tif (this.elseOperation) {\n\t\t\t\t\t\t\t\tvar _result = this.elseOperation();\n\t\t\t\t\t\t\t\tthis.routine.abort();\n\t\t\t\t\t\t\t\treturn _result;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthrow conditionalErrorFor(routine);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"and\",\n\t\t\tget: function get() {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn EnsureThat;\n\t}();\n\t\n\texports.default = EnsureThat;\n\t\n\t\n\tfunction runAsynchronously(runner, _operations, lastResult) {\n\t\tvar routine = runner.routine;\n\t\tvar promise = lastResult;\n\t\tvar operations = [promise].concat(_operations);\n\t\n\t\tvar _iteratorNormalCompletion = true;\n\t\tvar _didIteratorError = false;\n\t\tvar _iteratorError = undefined;\n\t\n\t\ttry {\n\t\t\tfor (var _iterator = operations[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\tvar operation = _step.value;\n\t\n\t\t\t\tpromise = promise.then(operation).then(function (result) {\n\t\t\t\t\tif (!result) {\n\t\t\t\t\t\treturn Promise.reject(conditionalErrorFor(routine));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_didIteratorError = true;\n\t\t\t_iteratorError = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_iteratorNormalCompletion && _iterator.return) {\n\t\t\t\t\t_iterator.return();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\treturn promise;\n\t}\n\t\n\tfunction conditionalErrorFor(routine) {\n\t\treturn new Error(\"Required condition of routine was not met -  \" + routine.currentOperation.name + \" returned false\");\n\t}\n\t\n\tfunction operationPreppedForExecution(operation, runnable) {\n\t\treturn function (args) {\n\t\t\treturn runnable.routine.invoke({ operation: operation, args: args });\n\t\t};\n\t}\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** Routine.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap cca7fab09041d4394025\n **/","export {ensureThat} from './EnsureThat';\n\nexport default class Routine {\n\n\taborted = false;\n\n\toperations = [];\n\n\thandlers = {};\n\n\tcurrentOperation = undefined;\n\n\tisSynchronous = true;\n\n\taspects = {\n\t\tinvocation: {\n\t\t\tbefore: [],\n\t\t\tafter: []\n\t\t}\n\t};\n\n\tconstructor (scope) {\n\t\tthis.scope = scope;\n\n\t\tscope.routine = this;\n\t}\n\n\taddOperation (operation) {\n\n\t\tRoutine.validateOperation(operation);\n\n\t\tthis.operations.push(operation);\n\n\t\treturn this;\n\t}\n\n\tfirst (operation) {\n\t\tthis.addOperation(operation);\n\t\treturn this;\n\t}\n\n\tthen (operation) {\n\t\tthis.addOperation(operation);\n\t\treturn this;\n\t}\n\n\ton (eventName, operation) {\n\t\tRoutine.validateOperation(operation);\n\n\t\tthis.handlers[eventName] = (arg) => {\n\t\t\treturn operation.call(this.scope, arg);\n\t\t};\n\t\treturn this;\n\t}\n\n\tget setup () {\n\t\treturn {\n\t\t\tas (...operations) {\n\t\t\t\tfor (let operation of operations) {\n\t\t\t\t\tRoutine.validateOperation(operation);\n\t\t\t\t\tthis.invoke({\n\t\t\t\t\t\toperation,\n\t\t\t\t\t\targs: this,\n\t\t\t\t\t\trespectAbort: false,\n\t\t\t\t\t\trunAspects: false\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\tget and () {\n\t\treturn this;\n\t}\n\n\tget but () {\n\t\treturn this;\n\t}\n\n\tabort () {\n\t\tthis.aborted = true;\n\t}\n\n\tinvoke ({operation, args, hasMultipleArgs = false, respectAbort = true, recordIt = true, runAspects = true} = {}) {\n\n\t\tif (runAspects) {\n\t\t\tfor (let aspect of this.aspects.invocation.before) {\n\t\t\t\taspect({operation, args, hasMultipleArgs, respectAbort, recordIt});\n\t\t\t}\n\t\t}\n\n\t\tif (respectAbort && this.aborted) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (recordIt) {\n\t\t\tthis.currentOperation = operation;\n\t\t}\n\n\t\tlet result;\n\n\t\tif (Routine.isRunnable(operation)) {\n\t\t\tresult = operation.run(this);\n\t\t}\n\t\telse {\n\t\t\tif (hasMultipleArgs) {\n\t\t\t\tresult = operation.apply(this.scope, args);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tresult = operation.call(this.scope, args);\n\t\t\t}\n\t\t}\n\n\t\tif (runAspects) {\n\t\t\tfor (let aspect of this.aspects.invocation.after) {\n\t\t\t\taspect({operation, args, hasMultipleArgs, respectAbort, recordIt, result});\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\trun () {\n\t\tlet lastResult;\n\n\t\ttry {\n\t\t\tfor (let i = 0; i < this.operations.length; i++) {\n\t\t\t\tlet operation = this.operations[i];\n\n\t\t\t\tlastResult = this.invoke({\n\t\t\t\t\toperation,\n\t\t\t\t\targs: lastResult\n\t\t\t\t});\n\n\t\t\t\tif (lastResult instanceof Promise) {\n\t\t\t\t\tthis.isSynchronous = false;\n\t\t\t\t\tconst operationsToPromisify = this.operations.slice(i + 1, this.operations.length);\n\t\t\t\t\treturn runAsynchronously(this, operationsToPromisify, lastResult);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn lastResult;\n\t\t}\n\t\tcatch (error) {\n\t\t\tRoutine.handleError(this, error);\n\t\t}\n\t}\n\n\tstatic set (scope) {\n\t\treturn new Routine(scope);\n\t}\n\n\tstatic isRunnable (operation) {\n\t\treturn typeof operation === 'object' && operation.run !== undefined;\n\t}\n\n\tstatic validateOperation (operation) {\n\t\tif (!Routine.isRunnable(operation) && typeof operation !== 'function') {\n\t\t\tthrow new Error('Invalid operation type - An operation has to ' +\n\t\t\t\t'either be a function or an object with a `run()` method. Instead an operation of type ' +\n\t\t\t\t`'${typeof operation}' was supplied.`);\n\t\t}\n\t}\n\n\tstatic handleError (routine, error) {\n\t\terror.$state = routine.scope.state;\n\t\terror.$invocation = {\n\t\t\toperation: routine.currentOperation.name\n\t\t};\n\n\t\tif (routine.handlers.error) {\n\t\t\troutine.invoke({\n\t\t\t\toperation: routine.handlers.error,\n\t\t\t\targs: error,\n\t\t\t\trecordIt: false,\n\t\t\t\trespectAbort: false\n\t\t\t});\n\t\t}\n\t\telse if (routine.isSynchronous) {\n\t\t\tthrow error;\n\t\t}\n\t}\n}\n\nfunction runAsynchronously (routine, operations, lastResult) {\n\tlet promise = Promise.resolve(lastResult);\n\n\tfor (let operation of operations) {\n\t\tpromise = promise.then((args)=> {\n\t\t\treturn routine.invoke({\n\t\t\t\toperation,\n\t\t\t\targs\n\t\t\t});\n\t\t});\n\t}\n\n\tpromise = promise.catch(error => {\n\t\tif (routine.handlers.error) {\n\t\t\troutine.abort();\n\t\t\treturn new Promise(resolve => {\n\t\t\t\tRoutine.handleError(routine, error);\n\t\t\t\tresolve();\n\t\t\t});\n\t\t}\n\n\t\treturn Promise.reject(error);\n\t});\n\n\treturn promise;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Routine.js\n **/","export function ensureThat (operation) {\n\treturn new EnsureThat(operation);\n}\n\nexport default class EnsureThat {\n\n\tscope = {};\n\n\toperations = [];\n\n\telseOperation = undefined;\n\n\tconstructor (operation) {\n\t\tthis.addOperation(operation);\n\t}\n\n\taddOperation (operation) {\n\t\tthis.operations.push(operationPreppedForExecution(operation, this));\n\t}\n\n\tget and () {\n\t\treturn this;\n\t}\n\n\tthat (operation) {\n\t\tthis.addOperation(operation);\n\t\treturn this;\n\t}\n\n\totherwise (operation) {\n\t\tthis.elseOperation = operationPreppedForExecution(operation, this);\n\t\treturn this;\n\t}\n\n\trun (routine) {\n\t\tthis.routine = routine;\n\n\t\tfor (let i = 0; i < this.operations.length; i++) {\n\t\t\tlet operation = this.operations[i];\n\t\t\tlet result = operation();\n\n\t\t\tif (result instanceof Promise) {\n\t\t\t\tconst operationsToPromisify = this.operations.slice(i + 1, this.operations.length);\n\t\t\t\treturn runAsynchronously(this, operationsToPromisify, result);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (!result) {\n\t\t\t\t\tif (this.elseOperation) {\n\t\t\t\t\t\tlet result = this.elseOperation();\n\t\t\t\t\t\tthis.routine.abort();\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthrow conditionalErrorFor(routine);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n}\n\nfunction runAsynchronously (runner, _operations, lastResult) {\n\tlet routine = runner.routine;\n\tlet promise = lastResult;\n\tlet operations = [promise].concat(_operations);\n\n\tfor (let operation of operations) {\n\t\tpromise = promise\n\t\t\t.then(operation)\n\t\t\t.then(result => {\n\t\t\t\tif (!result) {\n\t\t\t\t\treturn Promise.reject(conditionalErrorFor(routine));\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\treturn promise;\n}\n\nfunction conditionalErrorFor (routine) {\n\treturn new Error(`Required condition of routine was not met -  ${routine.currentOperation.name} returned false`);\n}\n\nfunction operationPreppedForExecution (operation, runnable) {\n\treturn (args) => {\n\t\treturn runnable.routine.invoke({operation, args});\n\t};\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/EnsureThat.js\n **/"],"sourceRoot":""}