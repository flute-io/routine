{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 5ae99cf84673d32b9305","webpack:///./src/EnsureThat.js"],"names":[],"mappings":"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","file":"EnsureThat.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"routine\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"routine\"] = factory();\n\telse\n\t\troot[\"routine\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 5ae99cf84673d32b9305\n **/","export function ensureThat (operation) {\n\treturn new EnsureThat(operation);\n}\n\nexport default class EnsureThat {\n\n\tscope = {};\n\n\toperations = [];\n\n\telseOperation = undefined;\n\n\tconstructor (operation) {\n\t\tthis.addOperation(operation);\n\t}\n\n\taddOperation (operation) {\n\t\tthis.operations.push(operationPreppedForExecution(operation, this));\n\t}\n\n\tget and () {\n\t\treturn this;\n\t}\n\n\tthat (operation) {\n\t\tthis.addOperation(operation);\n\t\treturn this;\n\t}\n\n\totherwise (operation) {\n\t\tthis.elseOperation = operationPreppedForExecution(operation, this);\n\t\treturn this;\n\t}\n\n\trun (routine) {\n\t\tthis.routine = routine;\n\n\t\tfor (let i = 0; i < this.operations.length; i++) {\n\t\t\tlet operation = this.operations[i];\n\t\t\tlet result = operation();\n\n\t\t\tif (result instanceof Promise) {\n\t\t\t\tconst operationsToPromisify = this.operations.slice(i + 1, this.operations.length);\n\t\t\t\treturn runAsynchronously(this, operationsToPromisify, result);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (!result) {\n\t\t\t\t\tif (this.elseOperation) {\n\t\t\t\t\t\tlet result = this.elseOperation();\n\t\t\t\t\t\tthis.routine.abort();\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthrow conditionalErrorFor(routine);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n}\n\nfunction runAsynchronously (runner, _operations, lastResult) {\n\tlet routine = runner.routine;\n\tlet promise = lastResult;\n\tlet operations = [promise].concat(_operations);\n\n\tfor (let operation of operations) {\n\t\tpromise = promise\n\t\t\t.then(operation)\n\t\t\t.then(result => {\n\t\t\t\tif (!result) {\n\t\t\t\t\treturn Promise.reject(conditionalErrorFor(routine));\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\treturn promise;\n}\n\nfunction conditionalErrorFor (routine) {\n\treturn new Error(`Required condition of routine was not met -  ${routine.currentOperation.name} returned false`);\n}\n\nfunction operationPreppedForExecution (operation, runnable) {\n\treturn (args) => {\n\t\treturn runnable.routine.invoke({operation, args});\n\t};\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/EnsureThat.js\n **/"],"sourceRoot":""}