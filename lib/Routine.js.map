{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6","webpack:///webpack/bootstrap 9c8293099bb2dcf45600?7597","webpack:///./src/Routine.js"],"names":[],"mappings":"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","file":"Routine.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"routine\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"routine\"] = factory();\n\telse\n\t\troot[\"routine\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 9c8293099bb2dcf45600\n **/","// export {ensureThat} from './EnsureThat'; // TODO: Uncomment or remove\n\nexport default class Routine {\n\n\taborted = false;\n\n\toperations = [];\n\n\thandlers = {};\n\n\tcurrentOperation = undefined;\n\n\tisSynchronous = true;\n\n\tconstructor (scope) {\n\t\tthis.scope = scope || {};\n\n\t\tthis.scope.routine = this;\n\t}\n\n\taddOperation (operation) {\n\n\t\tRoutine.validateOperation(operation);\n\n\t\tthis.operations.push(operation);\n\n\t\treturn this;\n\t}\n\n\tfirst (operation) {\n\t\tthis.addOperation(operation);\n\t\treturn this;\n\t}\n\n\tthen (operation) {\n\t\tthis.addOperation(operation);\n\t\treturn this;\n\t}\n\n\ton (eventName, operation) {\n\t\tRoutine.validateOperation(operation);\n\n\t\tif (!this.handlers[eventName]) {\n\t\t\tthis.handlers[eventName] = [];\n\t\t}\n\n\t\tthis.handlers[eventName].push((arg) => {\n\t\t\treturn operation.call(this.scope, arg);\n\t\t});\n\t\treturn this;\n\t}\n\n\tuse (decorator) {\n\t\tdecorator(this);\n\t\treturn this;\n\t}\n\n\tget setup () {\n\t\treturn {\n\t\t\tas (...operations) {\n\t\t\t\tfor (let operation of operations) {\n\t\t\t\t\tRoutine.validateOperation(operation);\n\t\t\t\t\tthis.invoke({\n\t\t\t\t\t\toperation,\n\t\t\t\t\t\targs: this,\n\t\t\t\t\t\trespectAbort: false,\n\t\t\t\t\t\trunAspects: false\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\tget and () {\n\t\treturn this;\n\t}\n\n\tget but () {\n\t\treturn this;\n\t}\n\n\tabort () {\n\t\tthis.aborted = true;\n\t}\n\n\tinvoke ({operation, args, hasMultipleArgs = false, respectAbort = true, recordIt = true, runHandlers = true} = {}) {\n\n\t\tconst invocation = {\n\t\t\toperation,\n\t\t\targs,\n\t\t\thasMultipleArgs,\n\t\t\trespectAbort,\n\t\t\trecordIt,\n\t\t\trunHandlers\n\t\t};\n\n\t\tif (invocation.runHandlers && this.handlers['before-invoking-operation']) {\n\t\t\tfor (let handle of this.handlers['before-invoking-operation']) {\n\t\t\t\thandle(invocation);\n\t\t\t}\n\t\t}\n\n\t\tif (invocation.respectAbort && this.aborted) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (invocation.recordIt) {\n\t\t\tthis.currentOperation = invocation.operation;\n\t\t}\n\n\t\tlet result;\n\n\t\tif (Routine.isRunnable(invocation.operation)) {\n\t\t\tresult = invocation.operation.run(this);\n\t\t}\n\t\telse {\n\t\t\tif (invocation.hasMultipleArgs) {\n\t\t\t\tresult = invocation.operation.apply(this.scope, invocation.args);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tresult = invocation.operation.call(this.scope, invocation.args);\n\t\t\t}\n\t\t}\n\n\t\tif (runHandlers && this.handlers['after-invoking-operation']) {\n\t\t\tfor (let aspect of this.handlers['after-invoking-operation']) {\n\t\t\t\taspect({operation, args, hasMultipleArgs, respectAbort, recordIt, result});\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\trun () {\n\t\tlet lastResult;\n\n\t\ttry {\n\t\t\tfor (let i = 0; i < this.operations.length; i++) {\n\t\t\t\tlet operation = this.operations[i];\n\n\t\t\t\tlastResult = this.invoke({\n\t\t\t\t\toperation,\n\t\t\t\t\targs: lastResult\n\t\t\t\t});\n\n\t\t\t\tif (lastResult instanceof Promise) {\n\t\t\t\t\tthis.isSynchronous = false;\n\t\t\t\t\tconst operationsToPromisify = this.operations.slice(i + 1, this.operations.length);\n\t\t\t\t\treturn runAsynchronously(this, operationsToPromisify, lastResult);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn lastResult;\n\t\t}\n\t\tcatch (error) {\n\t\t\tRoutine.handleError(this, error);\n\t\t}\n\t}\n\n\tset (scope) {\n\t\tfor (let prop in scope) {\n\t\t\tif (scope.hasOwnProperty(prop)) {\n\t\t\t\tthis.scope[prop] = scope[prop];\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\tstatic use (decorator) {\n\t\tconst routine = new Routine();\n\n\t\troutine.use(decorator);\n\n\t\treturn routine;\n\t}\n\n\tstatic set (scope) {\n\t\treturn new Routine(scope);\n\t}\n\n\tstatic isRunnable (operation) {\n\t\treturn typeof operation === 'object' && operation.run !== undefined;\n\t}\n\n\tstatic validateOperation (operation) {\n\t\tif (!Routine.isRunnable(operation) && typeof operation !== 'function') {\n\t\t\tthrow new Error('Invalid operation type - An operation has to ' +\n\t\t\t\t'either be a function or an object with a `run()` method. Instead an operation of type ' +\n\t\t\t\t`'${typeof operation}' was supplied.`);\n\t\t}\n\t}\n\n\tstatic handleError (routine, error) {\n\n\t\terror.$state = routine.scope.state;\n\t\terror.$invocation = {\n\t\t\toperation: routine.currentOperation ? routine.currentOperation.name : 'unknown operation'\n\t\t};\n\n\t\tif (routine.handlers.error) {\n\t\t\tfor (let operation of routine.handlers.error) {\n\t\t\t\troutine.invoke({\n\t\t\t\t\toperation: operation,\n\t\t\t\t\targs: error,\n\t\t\t\t\trecordIt: false,\n\t\t\t\t\trespectAbort: false\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\telse if (routine.isSynchronous) {\n\t\t\tthrow error;\n\t\t}\n\t}\n}\n\nfunction runAsynchronously (routine, operations, lastResult) {\n\tlet promise = Promise.resolve(lastResult);\n\n\tfor (let operation of operations) {\n\t\tpromise = promise.then((args)=> {\n\t\t\treturn routine.invoke({\n\t\t\t\toperation,\n\t\t\t\targs\n\t\t\t});\n\t\t});\n\t}\n\n\tpromise = promise.catch(error => {\n\t\tif (routine.handlers.error) {\n\t\t\troutine.abort();\n\t\t\treturn new Promise(resolve => {\n\t\t\t\tRoutine.handleError(routine, error);\n\t\t\t\tresolve();\n\t\t\t});\n\t\t}\n\n\t\treturn Promise.reject(error);\n\t});\n\n\treturn promise;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Routine.js\n **/"],"sourceRoot":""}